# SkyteKlokke - Prosjektplan

## Prosjektoversikt

**Appnavn:** SkyteKlokke  
**MÃ¥lgruppe:** Konkurranseskyttere og standplass-ledere  
**Plattformer:** Android (primÃ¦r), iOS (sekundÃ¦r)  
**Teknologi:** React Native + Expo SDK 54  

## Funksjonalitetsbeskrivelse

### Kjernearkitektur: ModulÃ¦rt Skyteprogramsystem
Et utvidbart system som stÃ¸tter ulike skytedisipliner og programmer gjennom en plugin-basert arkitektur.

### Basisfunksjon 1: Feltskyting Timer
En presis timer som stÃ¸tter standplass-ledere med korrekte kommandoer og timing for feltskyting.

**To moduser:**
- **Visuell modus:** For standplass-ledere (kun visuell timing)
- **Treningsmodus:** Med lydsignaler for selvtrening og gruppetrening

### Basisfunksjon 2: Duell-skyting Simulator
En lyskommando-simulator for tÃ¸rrtrening av duell-skyting, som simulerer den offisielle lyssekvensen.

### Utvidelsesmuligheter: Flere Skyteprogrammer
Systemet er designet for enkel utvidelse med:
- **Konkurranseprogrammer:** Offisielle regler og timing
- **Treningsprogrammer:** Simulering og Ã¸vingsmoduser
- **Spesialiserte disipliner:** Presisjon, tempo, kombinert

### Kommandosekvens for Feltskyting
1. **"Er skytterne klare"** - 10 sekunder fÃ¸r ildkommando
2. **"Klar"** - 5 sekunder fÃ¸r ildkommando  
3. **"Ild"** - Start av skyteperiode
4. **Skyteperiode** - Konfigurerbar varighet (standard 10 sekunder)
5. **"Stans"** - De to siste sekundene av skyteperioden

### Lyssekvens for Duell-skyting
1. **"Start"** kommando - Muntlig/visuell indikator
2. **Nedtelling** - 60 sekunder countdown
3. **Lyssekvens** (repeteres 5 ganger):
   - RÃ¸dt lys: 7 sekunder
   - GrÃ¸nt lys: 3 sekunder  
4. **Avslutning** - RÃ¸dt lys (permanent)

### Brukergrensesnitt Krav

#### Feltskyting Modus
- **Store, tydelige tall** for sekundnedtelling og opptelling
- **Fargekoding** for ulike faser:
  - RÃ¸d: Forberedelse ("Er skytterne klare", "Klar")
  - GrÃ¸nn: Aktiv skyting ("Ild")
  - Gul/Orange: Avslutning ("Stans")
- **Nedtelling fÃ¸r start** (15 sekunder total)
- **Opptelling under skyting** (konfigurerbar periode)
- **Treningsmodus med lydsignaler:**
  - Klare og distinkte kommandoer pÃ¥ riktig tidspunkt
  - Korrekt lengde pÃ¥ hver kommando
  - Justering av lydvolum
  - TTS (Text-to-Speech) eller forhÃ¥ndsinnspilte kommandoer

#### Duell-skyting Modus
- **Store, tydelige tall** for 60-sekund nedtelling
- **Fullskjerm lyssimulering**:
  - RÃ¸dt lys: Fullskjerm rÃ¸d bakgrunn
  - GrÃ¸nt lys: Fullskjerm grÃ¸nn bakgrunn
  - Svart skjerm: Pause mellom lyssekvenser
- **Sekvens-indikator** (1/5, 2/5, etc.)
- **"Start"-kommando** visuell/audio
- **Mobilplassering**: Optimalisert for horisontal plassering ved siden av treningsutstyr

## Teknisk Arkitektur

### Teknologi Stack
- **Frontend:** React Native 0.72+
- **Development:** Expo SDK 54
- **State Management:** React Hooks (useState, useEffect)
- **Timer:** JavaScript setInterval/setTimeout
- **Styling:** React Native StyleSheet
- **Audio:** Expo AV for lydkommandoer og TTS
- **Text-to-Speech:** Expo Speech for dynamiske kommandoer
- **Internasjonalisering:** expo-localization + i18next
- **SprÃ¥kstÃ¸tte:** Norsk, Engelsk, Svensk, Dansk (initial)

### Prosjektstruktur
```
skyteklokke/
â”œâ”€â”€ App.js                    # Hovedkomponent
â”œâ”€â”€ app.json                  # Expo konfigurasjon
â”œâ”€â”€ package.json              # Dependencies
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Timer.js          # Hoved timer komponent
â”‚   â”‚   â”œâ”€â”€ CommandDisplay.js # Kommando visning
â”‚   â”‚   â””â”€â”€ ConfigPanel.js    # Konfigurasjonspanel
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ TimerScreen.js    # Hovedskjerm
â”‚   â”‚   â”œâ”€â”€ SettingsScreen.js # Innstillinger
â”‚   â”‚   â””â”€â”€ ProgramScreen.js  # Program-valg
â”‚   â”œâ”€â”€ programs/             # Skyteprogrammer (modulÃ¦r)
â”‚   â”‚   â”œâ”€â”€ index.js          # Program registry
â”‚   â”‚   â”œâ”€â”€ base/
â”‚   â”‚   â”‚   â””â”€â”€ BaseProgram.js # Abstrakt basisklasse
â”‚   â”‚   â”œâ”€â”€ field/
â”‚   â”‚   â”‚   â”œâ”€â”€ StandardField.js    # Standard feltskyting
â”‚   â”‚   â”‚   â”œâ”€â”€ PistolField.js      # Pistol feltskyting
â”‚   â”‚   â”‚   â””â”€â”€ RifleField.js       # Rifle feltskyting
â”‚   â”‚   â”œâ”€â”€ duel/
â”‚   â”‚   â”‚   â”œâ”€â”€ StandardDuel.js     # Standard duell
â”‚   â”‚   â”‚   â””â”€â”€ RapidDuel.js        # Hurtig duell
â”‚   â”‚   â””â”€â”€ training/
â”‚   â”‚       â”œâ”€â”€ BasicTraining.js   # Grunnleggende trening
â”‚   â”‚       â”œâ”€â”€ IntervalTraining.js # Intervalltrening
â”‚   â”‚       â””â”€â”€ CustomTraining.js  # Tilpasset trening
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ timerLogic.js     # Timer-logikk
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ globalStyles.js   # Globale styles
â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”œâ”€â”€ index.js          # i18n konfigurasjon
â”‚   â”‚   â”œâ”€â”€ locales/
â”‚   â”‚   â”‚   â”œâ”€â”€ no.json       # Norsk oversettelse
â”‚   â”‚   â”‚   â”œâ”€â”€ en.json       # Engelsk oversettelse
â”‚   â”‚   â”‚   â”œâ”€â”€ sv.json       # Svensk oversettelse
â”‚   â”‚   â”‚   â””â”€â”€ da.json       # Dansk oversettelse
â”‚   â”‚   â””â”€â”€ utils.js          # i18n hjelpefunksjoner
â””â”€â”€ assets/                   # Bilder og lyder
```

## Utviklingsfaser

### Fase 1: Grunnleggende Timer (MVP)
**MÃ¥l:** Fungerende timer med alle kommandoer for feltskyting

**Funksjoner:**
- [x] Prosjektoppsett med Expo
- [ ] Grunnleggende timer-logikk (feltskyting)
- [ ] Kommandosekvens implementasjon
- [ ] Visuell nedtelling/opptelling
- [ ] Fargekoding av faser
- [ ] Konfigurerbar skyteperiode
- [ ] i18n setup og norsk sprÃ¥kpakke
- [ ] Duell-skyting simulator (basis)
- [ ] Silhuett-skyting simulator (tÃ¸rrtrening)
- [ ] Lyssekvens implementasjon (rÃ¸d/grÃ¸nn fullskjerm)
- [ ] Audio-kommandoer for treningsmodus
- [ ] TTS (Text-to-Speech) implementasjon
- [ ] ModulÃ¦r program-arkitektur
- [ ] BaseProgram abstrakt klasse

**Estimat:** 1-2 uker

### Fase 2: Forbedret Brukeropplevelse
**MÃ¥l:** Profesjonell app med bedre UX/UI

**Funksjoner:**
- [ ] Forbedret design og typografi
- [ ] Animasjoner mellom faser
- [ ] Vibrasjon ved kritiske kommandoer
- [ ] Pause/resume funksjonalitet
- [ ] Reset timer funksjon

**Estimat:** 1 uke

### Fase 3: Utvidede Funksjoner
**MÃ¥l:** StÃ¸tte for flere skytedisipliner

**Funksjoner:**
- [ ] Flere timer-profiler (pistol, rifle, etc.)
- [ ] Lydkommandoer (TTS eller opptak)
- [ ] Statistikk og loggfÃ¸ring
- [ ] Eksport av Ã¸kter
- [ ] MÃ¸rk/lys tema
- [ ] FlersprÃ¥klig stÃ¸tte (engelsk, svensk, dansk)
- [ ] Kulturell tilpasning av kommandoer
- [ ] Plugin-system for nye skyteprogrammer
- [ ] Program-kategorier (konkurranse vs trening)
- [ ] Tilpassbare treningsprogrammer

**Estimat:** 2-3 uker

### Fase 4: Publisering og Optimalisering
**MÃ¥l:** Klar for Google Play Store (og App Store)

**Oppgaver:**
- [ ] Performance optimalisering
- [ ] Testing pÃ¥ ulike enheter
- [ ] App ikoner og splash screens
- [ ] Store listing forberedelser
- [ ] Beta testing

**Estimat:** 1-2 uker

## Detaljerte Krav

### Timer States
```javascript
const TIMER_STATES = {
  // Feltskyting states
  IDLE: 'idle',           // Ikke startet
  READY_CHECK: 'ready',   // "Er skytterne klare" (10s fÃ¸r)
  PREPARE: 'prepare',     // "Klar" (5s fÃ¸r)
  FIRE: 'fire',          // "Ild" - aktiv skyting
  CEASE: 'cease',        // "Stans" (siste 2s)
  FINISHED: 'finished',   // Ferdig
  
  // Duell-skyting states
  DUEL_IDLE: 'duel_idle',         // Ikke startet
  DUEL_COUNTDOWN: 'duel_countdown', // 60s nedtelling
  DUEL_RED: 'duel_red',           // RÃ¸dt lys (7s)
  DUEL_GREEN: 'duel_green',       // GrÃ¸nt lys (3s)
  DUEL_PAUSE: 'duel_pause',       // Pause mellom sekvenser
  DUEL_FINAL_RED: 'duel_final_red', // Slutt - rÃ¸dt lys
  DUEL_COMPLETE: 'duel_complete'    // Ferdig
}
```

### Konfigurasjon
- **Skyteperiode:** 5-60 sekunder (standard: 10s)
- **Stans-varsel:** 1-5 sekunder (standard: 2s)
- **Forberedelsestid:** Fast 15 sekunder (10s + 5s)
- **SprÃ¥k:** Auto-deteksjon basert pÃ¥ enhetsinnstillinger
- **Kommandoer:** Tilpasset til lokale skyteinstruksjoner
- **Duell-modus:** 60s nedtelling, 5x lyssekvenser (7s rÃ¸d + 3s grÃ¸nn)
- **Lysintensitet:** Konfigurerbar skjermlysstyrke for synlighet
- **Audio-innstillinger:**
  - Lydvolum for kommandoer (0-100%)
  - TTS hastighet og toneleie
  - Muting av spesifikke kommandoer
  - ForhÃ¥ndsinnspilte vs TTS kommandoer

## Internasjonalisering (i18n)

### StÃ¸ttede SprÃ¥k (Initial)
- **ðŸ‡³ðŸ‡´ Norsk (BokmÃ¥l)** - PrimÃ¦rsprÃ¥k, standard kommandoer
- **ðŸ‡¬ðŸ‡§ Engelsk** - Internasjonal standard
- **ðŸ‡¸ðŸ‡ª Svensk** - Nordisk skyteforbund kompatibilitet  
- **ðŸ‡©ðŸ‡° Dansk** - Nordisk skyteforbund kompatibilitet

### Kommandosekvenser per SprÃ¥k

#### Norsk (Standard)
1. "Er skytterne klare" (10s fÃ¸r)
2. "Klar" (5s fÃ¸r)
3. "Ild" (start)
4. "Stans" (slutt)

#### Engelsk  
1. "Are the shooters ready" (10s fÃ¸r)
2. "Ready" (5s fÃ¸r)
3. "Fire" (start)
4. "Cease fire" (slutt)

#### Svensk
1. "Ã„r skyttarna klara" (10s fÃ¸r)
2. "Klar" (5s fÃ¸r)  
3. "Eld" (start)
4. "EldupphÃ¶r" (slutt)

#### Dansk
1. "Er skytterne klar" (10s fÃ¸r)
2. "Klar" (5s fÃ¸r)
3. "Ild" (start)
4. "Stop" (slutt)

### i18n Implementasjon
- **Automatisk sprÃ¥kdeteksjon** fra enhetsinnstillinger
- **Manuell sprÃ¥kvalg** i innstillinger
- **Fallback til engelsk** hvis sprÃ¥k ikke stÃ¸ttes
- **Kulturell tilpasning** av tidsformat og kommandoer
- **Fremtidige sprÃ¥k:** Finsk, Tysk, Fransk

### Fargepalett
- **Forberedelse:** `#FF6B6B` (RÃ¸d)
- **Aktiv:** `#4ECDC4` (Turkis/GrÃ¸nn)
- **Avslutning:** `#FFE66D` (Gul)
- **Idle:** `#95A5A6` (GrÃ¥)
- **Tekst:** `#2C3E50` (MÃ¸rk blÃ¥)

## Risiko og Utfordringer

### Tekniske Risikos
- **Timer-presisjon:** Sikre nÃ¸yaktig timing pÃ¥ mobile enheter
- **Bakgrunnsaktivitet:** App mÃ¥ fungere selv om skjermen lÃ¥ses
- **Batterilevetid:** Optimalisere for lang bruk

### Bruker-risikos
- **Brukervennlighet:** MÃ¥ vÃ¦re intuitiv under stress/konkurranse
- **PÃ¥litelighet:** Kan ikke feile under viktige konkurranser
- **Tilgjengelighet:** StÃ¸tte for ulike skjermstÃ¸rrelser

## Success Metrics

### MVP Success
- [ ] Timer kjÃ¸rer uten avbrudd i 30 minutter
- [ ] Kommandoer vises pÃ¥ riktig tidspunkt (Â±0.1s)
- [ ] App fungerer pÃ¥ minimum 3 Android-enheter
- [ ] Ingen kritiske bugs rapportert i testing

### Lang-sikt Success
- [ ] 100+ aktive brukere i skytemiljÃ¸et
- [ ] Gjennomsnittlig sesjon > 10 minutter
- [ ] App Store rating > 4.0
- [ ] Brukt i minimum 5 offisielle konkurranser

## Neste Steg

1. **Sett opp utviklingsmiljÃ¸**
   - Installer Node.js og Expo CLI
   - Opprett nytt Expo-prosjekt
   - Konfigurer development environment

2. **Implementer grunnleggende timer**
   - Lag timer state management
   - Implementer kommandosekvens logikk
   - Bygg grunnleggende UI

3. **Test og iterer**
   - Test med faktiske skyttere
   - Samle feedback pÃ¥ timing og kommandoer
   - Juster basert pÃ¥ brukerinput

---

**Opprettet:** ${new Date().toLocaleDateString('no-NO')}  
**Sist oppdatert:** ${new Date().toLocaleDateString('no-NO')}  
**Versjon:** 1.0